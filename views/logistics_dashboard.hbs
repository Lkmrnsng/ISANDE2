<div class="main-layout">

    <main class="dashboard-container">
        <div class="metrics-overview">
            <div class="metric-card">
                <h2>Monthly Expenses:</h2>
                <p>₱95,000</p>
                <span>↑ 2.1%</span>
            </div>
            <div class="metric-card">
                <h2>Deliveries Completed:</h2>
                <p>14 this month</p>
                <span>↑ 0.8%</span>
            </div>
            <div class="metric-card">
                <h2>Unpackaged Deliveries:</h2>
                <p>4</p>
            </div>
            <div class="metric-card">
                <h2>Active Shipments:</h2>
                <p>24</p>
                <span>↑ 42%</span>
            </div>
        </div>

        {{!-- views/weekly-tasks.hbs --}}
        <div class="task-list-container">
        <div class="task-list-wrapper">
            <div class="task-list-header">
            <div class="header-content">
                <h1>Weekly Tasklist</h1>
                <div class="navigation-buttons">
                <button id="prevWeek" class="nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                </button>
                <button id="nextWeek" class="nav-button">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                </button>
                </div>
            </div>
            </div>

            <div class="calendar-header" id="calendarHeader">
            {{#each weekDays}}
                <div class="calendar-header-cell {{#if isToday}}today{{/if}}">
                <div class="day-name">{{dayName}}</div>
                <div class="day-number">{{dayNumber}}</div>
                </div>
            {{/each}}
            </div>

            <div class="calendar-body" id="calendarBody">
            {{#each weekDays}}
                <div class="calendar-day-column" data-date="{{date}}">
                {{#each tasks}}
                    <div class="task-card" data-task-id="{{id}}">
                    <div class="task-content">
                        <button class="status-button {{#if completed}}completed{{else}}pending{{/if}}" onclick="toggleTaskStatus('{{../date}}', {{id}})">
                        {{#if completed}}
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"/></svg>
                        {{else}}
                            <svg class="status-icon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="5" y1="12" x2="19" y2="12"/></svg>
                        {{/if}}
                        </button>
                        <span class="task-text {{#if completed}}completed{{/if}}">{{text}}</span>
                    </div>
                    </div>
                {{/each}}
                </div>
            {{/each}}
            </div>
        </div>
        </div>

        <div class="procurement-section">
            <h2>Procurement Shipments</h2>
            <div class="shipment-grid">
                <div class="shipment-header">
                    <span>Quantity</span>
                    <span>Items</span>
                    <span>Farm</span>
                    <span>Receive by Date</span>
                    <span>Status</span>
                </div>
                {{#each shipments as |shipment|}}
                    <div class="shipment-row">
                        <span>{{shipment.quantity}}</span>
                        <span>{{shipment.items}}</span>
                        <span>{{shipment.farm}}</span>
                        <span>{{shipment.date}}</span>
                        <span>{{shipment.status}}</span>
                    </div>
                {{/each}}
            </div>
            <button class="create-shipment-btn">Create +</button>
        </div>

        <div class="delivery-tasks-section">
            <h2>Delivery Tasks</h2>
            <div class="delivery-table">
                <div class="delivery-header">
                    <span>Request ID</span>
                    <span>Weight (kg)</span>
                    <span>Delivery Status</span>
                    <span>Payment Status</span>
                    <span>Deliver By</span>
                    <span>Actions</span>
                </div>
                {{#each deliveries as |delivery|}}
                    <div class="delivery-row">
                        <span>{{delivery.id}}</span>
                        <span>{{delivery.weight}}</span>
                        <span>{{delivery.deliveryStatus}}</span>
                        <span>{{delivery.paymentStatus}}</span>
                        <span>{{delivery.deliverBy}}</span>
                        <span>
                            <button class="book-delivery-btn">Book Delivery</button>
                            <button class="complete-delivery-btn">Complete</button>
                        </span>
                    </div>
                {{/each}}
            </div>
        </div>
    </main>
</div>

<script src="/js/dashboard.js"></script>