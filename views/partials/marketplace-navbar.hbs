<header>
    <div class="header-left">
        <a href="/">
            <img src="/img/Sustainabowl.svg" alt="Sustainabowl Logo" class="logo">
            <p>Sustainabowl</p>
        </a>
    </div>

    <div class="header-right">
        <a href="/customer/dashboard">Back to Dashboard</a>
        <i class="fa-regular fa-user" id="acc-icon"></i>
        
        <!-- Shopping Cart Icon with Dropdown -->
        <i class="fa-solid fa-cart-shopping" id="cart-icon"></i>
        
        <div id="cart-dropdown" class="cart-popup">
            {{!-- marketplace_cart.js will populate each cart item here --}}
            <hr>
            <div class="cart-total">
                <p>Request Total:</p>
                <p class="total-price">â‚±{{totalPrice}}</p>
            </div>
            <a href="/marketplace/checkout">
                <button class="checkout-button">Proceed to Checkout</button>
            </a>
        </div>
    </div>
</header>

<script>
    // Toggle Cart Popup on click
    document.getElementById("cart-icon").addEventListener("click", function() {
        var cartDropdown = document.getElementById("cart-dropdown");
        if (cartDropdown.style.display === "none" || cartDropdown.style.display === "") {
            cartDropdown.style.display = "block";
        } else {
            cartDropdown.style.display = "none";
        }
    });

    // Hide cart when clicking outside
    document.addEventListener("click", function(event) {
        var cartDropdown = document.getElementById("cart-dropdown");
        var cartIcon = document.getElementById("cart-icon");

        if (!cartIcon.contains(event.target) && !cartDropdown.contains(event.target)) {
            cartDropdown.style.display = "none";
        }
    });
</script>
<script src="/js/marketplace_cart.js"></script>